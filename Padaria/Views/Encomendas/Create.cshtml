@model Padaria.Models.ViewModels.EncomendaViewModel

@{
    ViewData["Title"] = "Nova encomenda";
}

<div class="container mt-5">
    <h1 class="text-center mb-4">@ViewData["Title"]</h1>

    <form asp-action="AddProduto">
    <label>Produto: </label>
    <input name="codigo" type="text" />
        <button class="btn btn-info" type="submit" name="codigo">Adicionar</button>
   
    
    


   
        @if(Model != null){
            

            
            @for (int i = 0; i < Model.ProdutosConta.Count; i++)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(p => p.ProdutosConta[i].Quantidade)
                    </td>
                    <td>
                        @Html.DisplayFor(p => p.ProdutosConta[i].Produto.Nome)
                    </td>
                    <td>
                        @Html.DisplayFor(p => p.ProdutosConta[i].Total)
                    </td>
                </tr>


                <input type="hidden" asp-for="@Model.ProdutosConta[i].Quantidade" class="form-control" value="@Model.ProdutosConta[i].Quantidade" />



                <input type="hidden" asp-for="@Model.ProdutosConta[i].ProdutoId" class="form-control" value="@Model.ProdutosConta[i].ProdutoId" />



                <input type="hidden" asp-for="@Model.ProdutosConta[i].Total" class="form-control" value="@Model.ProdutosConta[i].Total" />
                    
               
                

            }

            
            
            




        }
        
    </form>

    @if (Model != null)
    {
        <form asp-action="Create">


        <div class="form-group mb-3">
            <label asp-for="@Model.Encomenda.Data" class="form-label">Entrega: </label>
            <input asp-for="@Model.Encomenda.Data" class="form-control" />
            <input type="hidden" asp-for="@Model.Encomenda.DataPedido" class="form-control" value="@DateTime.Now" />
            <input type="hidden" asp-for="@Model.Encomenda.MetodoPagamento" class="form-control" value="0" />
            <input type="hidden" asp-for="@Model.Encomenda.Status" class="form-control" value="0" />
            <span asp-validation-for="@Model.Encomenda.Data" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="@Model.Encomenda.ValorTotal" class="form-label">Total: R$ @ViewBag.Total.ToString("F2") </label>
            <input type="hidden" asp-for="@Model.Encomenda.ValorTotal" value="@ViewBag.Total" class="form-control" />
        </div>

            @for (int i = 0; i < Model.ProdutosConta.Count; i++)
            {
                <input type="hidden" asp-for="@Model.ProdutosConta[i].Quantidade" class="form-control" value="@Model.ProdutosConta[i].Quantidade" />
                <input type="hidden" asp-for="@Model.ProdutosConta[i].ProdutoId" class="form-control" value="@Model.ProdutosConta[i].ProdutoId" />
                <input type="hidden" asp-for="@Model.ProdutosConta[i].Total" class="form-control" value="@Model.ProdutosConta[i].Total" />
            }

            <button type="submit" class="btn btn-info">Finalizar</button>




    </form>
    }
    

</div>